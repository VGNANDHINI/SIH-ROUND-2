{
  "entities": {
    "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "displayName": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "photoURL": { "type": "string", "format": "uri" },
        "phoneNumber": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "state": { "type": "string" },
        "district": { "type": "string" },
        "block": { "type": "string" },
        "panchayat": { "type": "string" },
        "pumpName": { "type": "string" },
        "pumpCategory": { "type": "string" },
        "pumpDischargeRate": { "type": "number" },
        "motorHorsepower": { "type": "number" },
        "tankHeight": { "type": "number" },
        "tankBaseArea": { "type": "number" },
        "distributionNetworkDetails": { "type": "string" }
      },
      "required": ["uid", "createdAt", "state", "district", "block", "panchayat"]
    },
    "waterScheme": {
      "title": "Water Scheme",
      "description": "Represents a water supply scheme in a village.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "village": { "type": "string" },
        "status": { "type": "string", "enum": ["Active", "Inactive", "Under Maintenance"] },
        "approvalStatus": { "type": "string", "enum": ["Pending", "Approved", "Rejected"] },
        "coverage": { "type": "number" },
        "lastUpdated": { "type": "string", "format": "date" }
      },
      "required": ["name", "village", "status", "coverage", "lastUpdated", "approvalStatus"]
    },
    "pumpIssue": {
      "title": "Pump Issue",
      "description": "Represents a reported issue with a water pump.",
      "type": "object",
      "properties": {
        "pumpId": { "type": "string" },
        "location": { "type": "string" },
        "description": { "type": "string" },
        "reportedAt": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["Open", "In Progress", "Resolved"] }
      },
      "required": ["pumpId", "location", "description", "reportedAt", "status"]
    },
    "bill": {
      "title": "Bill",
      "description": "Represents a user's water bill.",
      "type": "object",
      "properties": {
        "month": { "type": "string" },
        "amount": { "type": "number" },
        "dueDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["Paid", "Due", "Overdue"] }
      },
      "required": ["month", "amount", "dueDate", "status"]
    },
    "pumpLog": {
      "title": "Pump Log",
      "description": "A log entry for pump operation.",
      "type": "object",
      "properties": {
        "operatorId": { "type": "string" },
        "startTime": { "type": "string", "format": "date-time" },
        "endTime": { "type": "string", "format": "date-time" },
        "duration": { "type": "number" },
        "waterSupplied": { "type": "number" },
        "energyConsumed": { "type": "number" },
        "tankName": { "type": "string" },
        "confirmedWaterLevel": { "type": "number" }
      },
      "required": ["operatorId", "startTime"]
    },
    "waterSupply": {
      "title": "Water Supply",
      "description": "Represents the real-time status of a water pump.",
      "type": "object",
      "properties": {
        "pumpId": { "type": "string" },
        "location": { "type": "string" },
        "status": { "type": "string", "enum": ["On", "Off"] },
        "lastChangedBy": { "type": "string" },
        "lastChangedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["pumpId", "location", "status"]
    },
    "waterTank": {
      "title": "Water Tank",
      "description": "Represents a water storage tank.",
      "type": "object",
      "properties": {
        "tankId": { "type": "string" },
        "name": { "type": "string" },
        "capacity": { "type": "number" },
        "currentLevel": { "type": "number" },
        "lastUpdated": { "type": "string", "format": "date-time" }
      },
      "required": ["name", "capacity", "currentLevel", "lastUpdated"]
    },
    "operator": {
      "title": "Operator",
      "description": "Represents a pump operator or technician.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "state": { "type": "string" },
        "district": { "type": "string" },
        "block": { "type": "string" },
        "panchayat": { "type": "string" }
      },
      "required": ["name", "email", "phone", "state", "district", "block", "panchayat"]
    },
    "complaint": {
      "title": "Complaint",
      "description": "Represents a complaint filed by a resident.",
      "type": "object",
      "properties": {
        "issueType": { "type": "string", "enum": ["No water", "Low pressure", "Dirty water", "Leakage", "Motor off", "Others"] },
        "address": { "type": "string" },
        "photoUrl": { "type": "string", "format": "uri" },
        "description": { "type": "string" },
        "contactNumber": { "type": "string" },
        "reportedAt": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Open", "In Progress", "Pending Verification", "Resolved"] },
        "userId": { "type": "string" },
        "userPanchayat": { "type": "string" },
        "userBlock": { "type": "string" },
        "userDistrict": { "type": "string" },
        "userState": { "type": "string" },
        "assignedTo": { "type": "string" },
        "assignedOperatorName": { "type": "string" },
        "operatorEmail": { "type": "string", "format": "email" },
        "taskStartedAt": { "type": "string", "format": "date-time" },
        "taskCompletedAt": { "type": "string", "format": "date-time" },
        "actionTaken": { "type": "string" },
        "resolutionPhotoUrl": { "type": "string", "format": "uri" },
        "verifiedBy": { "type": "string"},
        "rejectionReason": { "type": "string" },
        "gpsLocation": { "type": "object", "properties": { "lat": { "type": "number" }, "lng": { "type": "number" } } }
      },
      "required": ["issueType", "address", "description", "contactNumber", "reportedAt", "status", "userId", "userPanchayat", "userBlock", "userDistrict", "userState"]
    },
    "sopLibraryItem": {
      "title": "SOP Library Item",
      "description": "A single item in the SOP and micro-learning library.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string", "enum": ["Pumping", "Pipeline", "Chlorination", "Safety", "General O&M"] },
        "fileType": { "type": "string", "enum": ["video", "image", "pdf"] },
        "fileUrl": { "type": "string", "format": "uri" },
        "thumbnailUrl": { "type": "string", "format": "uri" },
        "tags": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["title", "category", "fileType", "fileUrl"]
    },
    "dailyChecklist": {
      "title": "Daily O&M Checklist",
      "description": "A daily operational and maintenance checklist.",
      "type": "object",
      "properties": {
        "date": { "type": "string", "format": "date" },
        "operatorId": { "type": "string" },
        "panchayatId": { "type": "string" },
        "pumpData": { "type": "object", "properties": { "totalRuntime": { "type": "number" }, "estimatedVolume": { "type": "number" }, "confirmed": { "type": "boolean" } } },
        "tankLevels": { "type": "object", "properties": { "startOfDay": { "type": "number" }, "endOfDay": { "type": "number" } } },
        "waterQuality": { "type": "object", "properties": { "chlorine": { "type": "number" }, "turbidity": { "type": "number" }, "needsAttention": { "type": "boolean" } } },
        "completedPercentage": { "type": "number" },
        "status": { "type": "string", "enum": ["Pending", "Submitted", "Requires Review"] }
      },
      "required": ["date", "operatorId", "panchayatId"]
    },
    "waterTest": {
        "title": "Water Quality Test",
        "description": "Results of a water quality test.",
        "type": "object",
        "properties": {
            "panchayatId": { "type": "string" },
            "operatorId": { "type": "string" },
            "ward": { "type": "string" },
            "locationType": { "type": "string" },
            "pH": { "type": "number" },
            "turbidity": { "type": "number" },
            "chlorine": { "type": "number" },
            "tds": { "type": "number" },
            "iron": { "type": "number" },
            "fluoride": { "type": "number" },
            "nitrate": { "type": "number" },
            "coliform": { "type": "boolean" },
            "testDate": { "type": "string", "format": "date-time" },
            "status": { "type": "string", "enum": ["safe", "unsafe", "attention-needed"] },
            "flaggedParameters": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["panchayatId", "operatorId", "ward", "testDate", "status"]
    },
    "dailyLeakCheck": {
      "title": "Daily Leak Check",
      "description": "A daily log for the leakage detection system.",
      "type": "object",
      "properties": {
        "timestamp": { "type": "string", "format": "date-time" },
        "gp_id": { "type": "string" },
        "pump_hours_today": { "type": "number" },
        "pump_hours_previous": { "type": "number" },
        "tank_level_change": { "type": "string", "enum": ["Increase", "No change", "Decrease"] },
        "pressure_level": { "type": "string", "enum": ["High", "Normal", "Low"] },
        "flow_rate": { "type": "string", "enum": ["Normal", "Low"] },
        "complaints_count": { "type": "number" },
        "leak_score": { "type": "number" },
        "severity": { "type": "string", "enum": ["red", "yellow", "green"] },
        "result_message": { "type": "string" }
      },
      "required": ["timestamp", "gp_id", "leak_score", "severity"]
    },
    "state": { "title": "State", "description": "Represents a state.", "type": "object", "properties": { "name": { "type": "string" }, "center": { "type": "object", "properties": {"lat": {"type": "number"}, "lng": {"type": "number"}} }, "zoom": { "type": "number"} }, "required": ["name"] },
    "district": { "title": "District", "description": "Represents a district.", "type": "object", "properties": { "name": { "type": "string" }, "center": { "type": "object", "properties": {"lat": {"type": "number"}, "lng": {"type": "number"}} }, "zoom": { "type": "number"} }, "required": ["name"] },
    "mandal": { "title": "Mandal", "description": "Represents a mandal/block.", "type": "object", "properties": { "name": { "type": "string" }, "center": { "type": "object", "properties": {"lat": {"type": "number"}, "lng": {"type": "number"}} }, "zoom": { "type": "number"} }, "required": ["name"] },
    "panchayat": { "title": "Panchayat", "description": "Represents a panchayat.", "type": "object", "properties": { "name": { "type": "string" }, "center": { "type": "object", "properties": {"lat": {"type": "number"}, "lng": {"type": "number"}} }, "zoom": { "type": "number"} }, "required": ["name"] },
    "pipeline": {
      "title": "Pipeline",
      "description": "Represents a water pipeline segment.",
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["Rising Main", "Distribution"] },
        "material": { "type": "string" },
        "diameter": { "type": "number" },
        "path": { "type": "array", "items": { "type": "object", "properties": { "lat": { "type": "number" }, "lng": { "type": "number" } } } },
        "length": { "type": "number"},
        "villageServed": { "type": "string" }
      },
      "required": ["type", "path", "length", "villageServed"]
    },
    "marker": {
      "title": "Marker",
      "description": "Represents a point of interest on the map.",
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["Pump", "Tank", "Valve", "Alert", "Operator", "Complaint", "Pump Fault", "Leak Cluster"] },
        "label": { "type": "string" },
        "position": { "type": "object", "properties": { "lat": { "type": "number" }, "lng": { "type": "number" } } },
        "data": { "type": "object" }
      },
      "required": ["type", "label", "position"]
    }
  },
  "auth": {
    "providers": ["email", "google", "phone"]
  },
  "firestore": {
    "/users/{userId}": { "schema": { "$ref": "#/entities/userProfile" } },
    "/waterSchemes/{schemeId}": { "schema": { "$ref": "#/entities/waterScheme" } },
    "/pumpIssues/{issueId}": { "schema": { "$ref": "#/entities/pumpIssue" } },
    "/bills/{billId}": { "schema": { "$ref": "#/entities/bill" } },
    "/pumpLogs/{logId}": { "schema": { "$ref": "#/entities/pumpLog" } },
    "/waterSupply/{pumpId}": { "schema": { "$ref": "#/entities/waterSupply" } },
    "/operators/{operatorId}": { "schema": { "$ref": "#/entities/operator" } },
    "/complaints/{complaintId}": { "schema": { "$ref": "#/entities/complaint" } },
    "/waterTanks/{tankId}": { "schema": { "$ref": "#/entities/waterTank" } },
    "/sopLibrary/{sopId}": { "schema": { "$ref": "#/entities/sopLibraryItem" } },
    "/daily_leak_checks/{checkId}": { "schema": { "$ref": "#/entities/dailyLeakCheck" } },
    "/panchayats/{panchayatId}/checklists/{checklistId}": { "schema": { "$ref": "#/entities/dailyChecklist" } },
    "/panchayats/{panchayatId}/waterTests/{testId}": { "schema": { "$ref": "#/entities/waterTest" } },
    "/states/{stateId}": { "schema": { "$ref": "#/entities/state" } },
    "/states/{stateId}/districts/{districtId}": { "schema": { "$ref": "#/entities/district" } },
    "/states/{stateId}/districts/{districtId}/mandals/{mandalId}": { "schema": { "$ref": "#/entities/mandal" } },
    "/states/{stateId}/districts/{districtId}/mandals/{mandalId}/panchayats/{panchayatId}": { "schema": { "$ref": "#/entities/panchayat" } },
    "/states/{stateId}/districts/{districtId}/mandals/{mandalId}/panchayats/{panchayatId}/pipelines/{pipelineId}": { "schema": { "$ref": "#/entities/pipeline" } },
    "/states/{stateId}/districts/{districtId}/mandals/{mandalId}/panchayats/{panchayatId}/markers/{markerId}": { "schema": { "$ref": "#/entities/marker" } }
  }
}